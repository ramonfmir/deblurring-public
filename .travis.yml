sudo: enabled
language: python
python:
- 3.6
env:
  global:
  - PYTHONPATH=.
  - secure: DQTAE7u6d0BhPksHdAtw/zfKOdax+igTxLBki7lhDcr8iDXwNbXhIni2XYfFrcljKTkmyq8vXcWXsDM3OFc/WMwlhu6tQdgTxJkYc+HuuXNFYfzngFHDywMg7BFH2yS8zwFLmHIaWD5FLGiFKJexXN3aNLgAZpNpXR5H59HPGhl2Xm56j7MR0iQTIyDkZbGbCQamzmFFe1vr0RyBVA7aFGRvuBqcDlM3QFMCahdUZYKAtkWnLPBGy4GAJqAwA2OL+/NquE8qLnrY412Mg5g84epqXMLgnQqYAzLzQmnmh73xpWvs+07Gtox5MAX26mxtDpdc22A3sFCUIcAskHoZiY8Hv7Txr5GQllBLc+OiAC/5CBPH5xr0NHGl+xD2KdEwULy+bpFtstiZdb8/ZhLRIGC+XQlB0M5qvkuF+lqxma2L+aqKAsH3ZpPCYjLPebYBntil4iDDRND7hw0tanrztNLlc4ut7uauN6+wW1HNzaqpIE1rYc8ts5s5hUZW/h5lDCSRLKATHTgiDeqOPzRlACkma2AvBd0qmY5qhBl84hIVzyhUfcQ+JFc0w0+dSbhIs6cXuDOU4lVfwlimukPGhLAbBjIgQ6V3fA76p1tC0G33jKidAAl0LVoR0I93QsaL9KkLRjdLGdG+6NS35F2g8xWCdoUNXIw/vc+LKpeQlks=
  - secure: TwheUxvdfPfI9uP5nFccuMyfDsNayMeqkkENAOJaYTDDr0/srz9ieLeabcP6l2Fn+lPv6SIChm2N+Nici+VwnEBANxOoE8nW3rNqqoDndPIyWoc84cyLSYFNkJm3I68tjqEkI2cQl8NU31TjtAF+wDZels61O58egf9Dj9sKL12L+hAn++4CRg1enFhTE69PiBPfqFtisPHEMe6ErVevjz45LMDzzTMSQFUMeBJLRlG+HJq5IEJVzI1e1RSZMALDVpC96uPKo6GywBRxjgV/8ndkR4ck9XS1ihism18dkUoeYVwcadTcYxKMNX2NDfvxeKAehw8LNC4OXCARmyFpmAXmB3F2MDDbAQ7KSdnh8sEgnNWk2jIgYLr6/z7hrxC0yl/CVFq13oPtcDEWw4IRaZJPfno/bhC9Tq2UgStYAQCAUUTSck2FgqtmnT27GcUaiW6rlDCFTVCjQh0QhhD9qv5R/TeCyphqBYFybqJ4lUM88P4IFOiq6YhPQvuLOR4ujW+qE8GtVw74hImv7Wu5tDQE26/ZIRmrj/NxIEWTSV8olsY4kVQL6IjkByKHKwYfm+fwRWNFCyDvm9x+l+PWXqcDb5dEAQ4IwfOBDjMcEcKRdbVmw4rp4RvIwILHe5PCVUrdKRD+LQ0MhosbBIMtdWAjsPycbl6VhUz8hsXdvKs=
  - secure: VeW/loQeEPa+xm35dxUD0SSue8KAHS2Zzktbi7wMC1bUcZDBJDckPK8DriFo30Nm5P74Gh/bPVmC6owaHMyzDBLCQjuiAIuMrGRhjSmR6gj81OGknmJ/as8JrLLCfNdMY1K5gn8aBFnEbYsP4uxNU4HbBoeB0j9fgzLVJHiHnHmVDk8qcClaDdOmekQtKA75MPSqB6Jn+Q6G/MkW/1LlbrMPTY1VUhmj4WCXEuJAnrQpho8oq1FQ/p/0gbEpo805h7syJo9WkIqXkh0Kv71ILgvgkKq5OEj3yjspq3JBUwbL0dNgCakNmL+0LMjxyv2LGPNp+OGeJOKTHSiWjjSAOdfmNvQvNpLOAaXGM3ucNSDNejkgZvplsxNcDCwG462pFXANLreZ7LjydlNrSj+d/8/O2Q8rUM4p+TPGFET/b4T2ZX2lSS7zM3QaMQIUp9RBsoBanqpiAaddv4rxwhtE6o8TbZYELE7dtUddWjQkw/FG2CR5EhF/yUMf0iFQaHA3ddJJzWNPzh1lpn9LAP5sn3LuYwhd+bUznQ9DVWTL9X6mQs5Cp6LvdIfuwBk458fN8ZlZSQsjxrfkpUuLUdKqdoIErJA4SSNN98v4ljU3JvctF56mGpZRLNw4g20APiE9Cs6gnLG0reg3TG6vGSZlCJ8aXRre9aFnH/AQ2IdvT18=
  - secure: NOtzpCENVNG1hvx/vpJkC4ArNKIVlheMrOOrWL7Upv1jPdvky7y6/xVtJXaXBS0sLDUMJS6JVvIwZp/H1neomfI/GLElNbKSdjxKN8JwipPX1CwAhOyux1JD7InVtlfmZNYPNLt3QOg7+G40m4UkI+oyLZNHzuj/Cyx3OmxnaOYEAvONdKmuMPa2u+IJbQeGnFuWicuetyKHpKkFbBHqShBf8X9NlYLTAGiN2hnEBL0pWFqQqhay0FXnEr+LnXIFWUJTdRsRy1BMgBVhdidPqdlWiCbUx87vf0Uns9s1l7VkBSDTjHC6XmPTIPHgJr2OLDEibxTPT03bK+JWuNnCgQxZ60So/TTeK1sXfO6cZX9O8Xf1OHmAyBSFzQfJxSdpdCazZ4VhMQMRnTFQXaTgmSNA+vLQoPs2bDxCvgC7gjzMXww/1f9js7imhqn87KbVkIbnwbbTK5GgzNWgQGeVrk2743MUXd5Tf0yZpRH8TNPuyFpe8Y1apcs+ubWT90x5LuSj+Hw50pDv87SIlLtBl79mU59/TwUtJADNfm3Zq/L3dz9LU5i3MIIK2D3G35HqPXbVXk7KwHx6TEpgezsCAoZ1hbs/uPdIh4Zw9kJSJDXTX7S9YIfE9TkCVa0dAMHCEAjNBGRcpAqdi8+Tyb/tbPEXNlD9NXUs5gSZJaZM+1M=
  - secure: QwABes96G+WQMgmvBQBxVsbI3iWRmv9DLEtCnuMa+XouTJ7XXPKpakIO7SFCjGPm1uBPr4HXGDBa00rU3c86N/aPl3RB8ADoQZyWwfGEj3t2yGIsuZIir3Ta+DoKkLDqXhT98mxi2GOICVIZHueO2AwMEKm+OV+nn2Nj/G/yDX26GOrewa2golMwsdouSBeUxPe3UEX55EBcnszZHPq+/BdnuXNMcoDFjjrl6NNAo84oEsbzETlH8EF14c4/N16Icszbry0A8yyMpdwYAG3yclwIbvFKja8oddnibyPvuftdmNxkT81vx4kWIn31mOr1WAbYQoaLTwLkJVXnRRXlc8nMZZugaJiMTBI/oEEMTGdBRzkfkoAO63HjdebmIOUxbJ81gXEl6WDN5MW+htDhyJm8P0hc8ecYnEmXfxiV1PDNJfoJBw6aUolJGK/HMJ+26VHPBkqC7Cb4qNKyojKL+fuOHiZnWGoxQnDRvJQEgUm4g2LfES+CX04LHK8QMsL3/jQ8TtfUG8ezG7bpsv+dsZWDbVR1CBs0p/Dm1+0gRLD0TE8lys8O+upXK55Iqqg/ZE/ANBVTIk8qaowRQjlSGKN7QNrDF/6JyjpQJZtbsAU2IDIjlheagRxMmOZpwgaLHDEX8N72Qrdp2f+6TXPvB38OdWeDfshrkuARL+lu/Kk=
  - secure: kBGLQjR9JpZZ196qirl6cprf8s5qE5jUmXvBcgfjsRev/gzx8Ycb75NVpUj9L5TJVVvKHnZrR89h5RTzug1wn97ynQiN5cfLpgze8B282xnkmY1NLQfAH3K+8Ii/m0eJqhF2KMdACOTMp7hhqgKb5Y+L6N6bOXqvN3uafK2A+2tLHBWBdvQtqhDwBSE1e+FIwVvkbjXbBJnMksmWQigKylIGdGSsi4LqziTT4sn30eqpXWdia13o0i6gZjxke+s1FyBIwyW8SSFbmHDYfLOReKbc3Hdg17qNw7MvJf7W87UAHmvhGWY0L99FNcXTHVzv9bxUeFvTLmCHIy+QRVzBYJc3KWDTZISZAe56NO0U8cZ7BxFLukWKjmoT8yBEDXKMx0SV7FxujU9NEq3UFp8AZeZHRB8o6BrMfKgFqVvp/6cxy7UQemRc/sgRwOiZlZvmU1MhSSCkQOnqQp3upG/VEqRUxRjUIEE1jBJxQ/HZrF0dYgx6JE7ynpa8fX4wBcdgUPqz3mon9eOVYrYcSb7WLuDYIkdfJHEHiXp6blowi7z5ftA2gz5MgiiQTJ8pas12YJU74mg04qDFO6JyT5p9xOVMSEDj0G0BmP/pxge5sM7ORfGt1pR0FR5ZwOvRzqhh9UslIlWkDcdF4aNp03QZIdNsYFqBYSbc6JlktaSEGLg=
  - secure: JQkzGclyp2CtVyC17rAS015rdkxXlS17yMm4TWxZOsmzfWdYm+LlxlMCcFZleELWuHb9kJsaxx8cJPtkRWKueU5nCZv+aMnDdvXANSi5VTVKLeRR2IKJRU/xc/q8acZQ/NrKh+cgpk0xRkm9hjRB+os+tyFfpQ3wcSsc78cfLRddYRlvpT4D8qhGfRq21TDeOxx01q8mvb/3Pjcx6dtUDBdK229SziMja1jHAgSKbSECHFsCw78BKf3wxPnR17TfG2BM0QIFvhFKifyt42rrFIsTFxjvDMGAtMKrIHeSW21pVzEqnh9On2idOK9MxwmZyGMI95iaq0fwc22ODK1yAsntPejo3t3z0AbsdeB9gD1ChJIDRTz0Q48GklKL0mdSm+1niqrNoxLaRvLAPeCcib97vlHsIxJIQCNGOPIuv98YQ1k/0mTymfUIhI6FcFPLC1dYA4CKYJ3WwSOAfGJNu8DD236nkeAnGFEln79crrIIbYr1b57j3Z6b/jonBKV9GvyuOczBNm6uCf/z/NvTRX8aOM/MIJC4fTm6FTr/xcgGnEMQ8dXkbPbk1MkgV77b5FJv4DcygIPVSFpmwFd/xjpKn+I4RRk6aPQJxH1zt6Th+hFtI8vbwlfN1T61E4SIL0C1Nc+nNLRgLPO8dCnRV39CoZws/v3Z9n6RTIz5AXQ=
  - secure: nEcmkRPl1unilFttoiujUxbEn/mVvghR0jZdqpybli5gBa00i+qFFYXGSpWN5TwNJjY9GSn7iUJAu9z1XiFrDKv1y2HFP7FGxFv3EZV65btqaiugBY9aBQfrHwGX4jniqrXcwq5W9m6DfuVn69VMKtYVuvCUlsTpQXTlaHkJ7ovF5yfcjd3QXgibRdt8AXUondXwhDRsXodvy7vjQIiQcvNz90VYDYCEl2wmXOc1VnDVGRCI70j9MfcVzcX8ZBgIV8LmgPdintVgsYLUbVtMajma5T0jHG5T1uAytOTMshTWGFFWlamz5MOYksO914hvHYjei4FG7k33NO0ydg1a7CxegUuMxJhR80Tg5BZFT3T5fnODlOFswU5xyX3YGK3NSKsBmvjofvZdVyTIQx0fhf34kwfgb8mLpyJr9zymdaB58U52bP2frmdxtVwXRZ5lhKCdgIGZojBtspf9l5nIMKtNBDnW2fX2bYkv0wYqYAHd8iAEsAQVooTUWkogf0MJUYu3UqGvZpKv72JvnjiP+J+qRFZisz1yzAaBGlkifrFnKT+OX9TmO7Iqxek3DAlD06P28gcvsO7Ku2UEgHE/GVHvy83q8cSEwRKyBGMTrSRbmrR4yf6AAPplH7Y6/xBvxi/OzzWriSdicBBsoQw943d1AzZBRqGyLGOC1dMd1ro=
addons:
  ssh_known_hosts: $AZURE_HOST
install:
- sudo apt-get install sshpass
- pip3 install --upgrade pip
- pip3 install -r requirements_travis.txt
- pip3 install --pre azure-cli --extra-index-url https://azurecliprod.blob.core.windows.net/edge
script:
- python3 -m coverage run --source=. -m run_tests
- python3 -m coverage xml
- for f in $(find . -name '*.py'); do pycodestyle --first $f; done
after_success:
- python3 -m codecov --token=$CODECOV_TOKEN
- ./deploy.sh

addons:
  ssh_known_hosts: 52.170.199.130
install:
- sudo apt-get install sshpass
- pip3 install --upgrade pip
- pip3 install -r scripts/requirements_travis.txt
- pip3 install --pre azure-cli --extra-index-url https://azurecliprod.blob.core.windows.net/edge
script:
- python3 -m coverage run --source=. -m scripts.run_tests
- python3 -m coverage xml
- for f in $(find . -name '*.py'); do pycodestyle --first $f; done
after_success:
- python3 -m codecov --token=cd3a1de8-5e50-4cd1-aa93-bbf0e4603994
- bash scripts/deploy.sh
